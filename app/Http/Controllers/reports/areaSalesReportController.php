<?php
 namespace App\Http\Controllers\reports; use App\Http\Controllers\Controller; use App\Models\areas; use App\Models\products; use App\Models\sale_details; use Illuminate\Http\Request; class areaSalesReportController extends Controller { public function index() { $areas = areas::all(); return view("\162\x65\x70\x6f\162\x74\x73\x2e\141\x72\x65\x61\123\141\154\x65\56\151\156\144\145\170", compact("\141\x72\x65\x61\163")); } public function data(Request $request) { $area = $request->areaID; $from = $request->from; $to = $request->to; $products = products::all(); foreach ($products as $product) { $qty = sale_details::where("\x70\x72\157\144\x75\x63\x74\x49\104", $product->id)->where("\141\162\145\141\x49\104", $area)->whereBetween("\x64\x61\164\x65", array($from, $to))->sum("\x71\x74\171"); $bonus = sale_details::where("\x70\162\x6f\144\x75\x63\x74\x49\x44", $product->id)->where("\x61\x72\x65\141\111\104", $area)->whereBetween("\144\x61\x74\x65", array($from, $to))->sum("\142\x6f\156\x75\163"); $amount = sale_details::where("\x70\162\157\144\x75\143\x74\x49\104", $product->id)->where("\141\162\x65\141\111\104", $area)->whereBetween("\144\x61\164\x65", array($from, $to))->sum("\164\x69"); $product->qty = $qty; $product->bonus = $bonus; $product->amount = $amount; } $area = areas::find($area); return view("\162\145\x70\157\162\x74\x73\x2e\141\x72\x65\141\123\x61\154\x65\56\144\x65\164\x61\151\154\x73", compact("\141\162\x65\141", "\x66\x72\157\x6d", "\164\x6f", "\x70\x72\x6f\144\x75\143\x74\163")); } }